<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="UTF-8">
    <title>Cycle Time</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/

        var team = /*[[${team}]]*/ 'all';
        console.log('team: ' + team);

        /*]]>*/
    </script>
    <script type="text/javascript">

      google.charts.load('current', {'packages':['line']});
      google.charts.setOnLoadCallback(drawChart);


    function drawChart() {

    var jsonData = $.ajax({
         url: "/cycletime/" + team + "/",
          dataType: "json",
          async: false
          }).responseText;

     var data = new google.visualization.DataTable(jsonData);

      var options = {
        chart: {
          title: 'Cycle Time',
          subtitle: 'cycle time over time'
        },
        width: 900,
        height: 500,
        series: {
          // Gives each series an axis name that matches the Y-axis below.
          0: {targetAxisIndex: 0},
        },
          vAxes: {
              // Adds titles to each axis.
              0: {title: 'Cycle Time (days)', viewWindow:{min: 0}},
          }
        // axes: {
        //   // Adds labels to each axis; they don't have to match the axis names.
        //   y: {
        //     Satisfaction: {label: 'Satisfaction (avg)'},
        //     Responses: {label: 'Responses'}
        //   }
        // },
        //colors:['orange','grey']
      };

      var chart = new google.charts.Line(document.getElementById('linechart_material'));

      chart.draw(data, google.charts.Line.convertOptions(options));
    }
    </script>
  </head>
  <body>
    <div id="linechart_material" style="width: 900px; height: 500px"></div>
  </body>
</html>